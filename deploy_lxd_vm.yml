---
- hosts: localhost
  connection: local
  tasks:
  - name: Create an Ubuntu container
    lxd_container:
      name: mycontainer
      state: started
      source:
        type: image
        mode: pull
        server: https://images.linuxcontainers.org/
        protocol: simplestreams
        alias: ubuntu/bionic/amd64
  - name: Create a user in the container
    delegate_to: mycontainer
    lxc_user:
      name: myuser
      password: mypassword
      groups: sudo
